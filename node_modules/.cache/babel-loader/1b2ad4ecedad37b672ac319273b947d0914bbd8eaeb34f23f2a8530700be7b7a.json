{"ast":null,"code":"var _jsxFileName = \"/home/tatsuguy/Documentos/Universidad/5to Cuatrimestre/IoT(rash)/fruticliente/src/components/login.jsx\",\n  _s = $RefreshSig$();\nimport { useRef, useState, useEffect, useContext } from \"react\";\nimport AuthContext from \"../context-Api/AuthProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Login = () => {\n  _s();\n  const {\n    setAuth\n  } = useContext(AuthContext);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      var _response$data, _response$data2;\n      const response = await axios.post(LOGIN_URL, JSON.stringify({\n        user,\n        pwd\n      }), {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        withCredentials: true\n      });\n      const accessToken = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.accessToken;\n      const roles = response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.roles;\n      setAuth({\n        user,\n        pwd,\n        roles,\n        accessToken\n      });\n      setUser(\"\");\n      setPwd(\"\");\n      setSuccess(true);\n    } catch (err) {\n      var _err$response, _err$response2;\n      if (!(err !== null && err !== void 0 && err.response)) {\n        setErrMsg(\"No Server Response\");\n      } else if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 400) {\n        setErrMsg(\"Missing Username or Password\");\n      } else if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401) {\n        setErrMsg(\"Unauthorized\");\n      } else {\n        setErrMsg(\"Login Failed\");\n      }\n      errRef.current.focus();\n    }\n  };\n  const userRef = useRef();\n  const errRef = useRef();\n  const [user, setUser] = useState(\"\");\n  const [pwd, setPwd] = useState(\"\");\n  const [errMsg, setErrMsg] = useState(\"\");\n  const [success, setSuccess] = useState(false);\n  useEffect(() => {\n    userRef.current.focus();\n  }, []);\n  useEffect(() => {\n    setErrMsg(\"\");\n  }, [user, pwd]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: success ? /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"You are logged in!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"logger d-flex justify-content-center align-items-center flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        ref: errRef,\n        className: errMsg ? \"errmsg\" : \"offscreen\",\n        \"aria-live\": \"assertive\",\n        children: errMsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \"Username:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"username\",\n          ref: userRef,\n          autoComplete: \"off\",\n          onChange: e => setUser(e.target.value),\n          value: user,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          onChange: e => setPwd(e.target.value),\n          value: pwd,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Need an Account?\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"line\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n_s(Login, \"aJW6m3UlFumHhCqyyFHP2WuGIdo=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useRef","useState","useEffect","useContext","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Login","_s","setAuth","handleSubmit","e","preventDefault","_response$data","_response$data2","response","axios","post","LOGIN_URL","JSON","stringify","user","pwd","headers","withCredentials","accessToken","data","roles","setUser","setPwd","setSuccess","err","_err$response","_err$response2","setErrMsg","status","errRef","current","focus","userRef","errMsg","success","children","fileName","_jsxFileName","lineNumber","columnNumber","className","ref","onSubmit","htmlFor","type","id","autoComplete","onChange","target","value","required","href","_c","$RefreshReg$"],"sources":["/home/tatsuguy/Documentos/Universidad/5to Cuatrimestre/IoT(rash)/fruticliente/src/components/login.jsx"],"sourcesContent":["import { useRef, useState, useEffect, useContext } from \"react\";\nimport AuthContext from \"../context-Api/AuthProvider\";\nexport const Login = () => {\n    const { setAuth } = useContext(AuthContext);\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const response = await axios.post(\n                LOGIN_URL,\n                JSON.stringify({ user, pwd }),\n                {\n                    headers: { \"Content-Type\": \"application/json\" },\n                    withCredentials: true,\n                }\n            );\n            const accessToken = response?.data?.accessToken;\n            const roles = response?.data?.roles;\n            setAuth({ user, pwd, roles, accessToken });\n            setUser(\"\");\n            setPwd(\"\");\n            setSuccess(true);\n        } catch (err) {\n            if (!err?.response) {\n                setErrMsg(\"No Server Response\");\n            } else if (err.response?.status === 400) {\n                setErrMsg(\"Missing Username or Password\");\n            } else if (err.response?.status === 401) {\n                setErrMsg(\"Unauthorized\");\n            } else {\n                setErrMsg(\"Login Failed\");\n            }\n            errRef.current.focus();\n        }\n    };\n    const userRef = useRef();\n    const errRef = useRef();\n    const [user, setUser] = useState(\"\");\n    const [pwd, setPwd] = useState(\"\");\n    const [errMsg, setErrMsg] = useState(\"\");\n    const [success, setSuccess] = useState(false);\n    useEffect(() => {\n        userRef.current.focus();\n    }, []);\n    useEffect(() => {\n        setErrMsg(\"\");\n    }, [user, pwd]);\n\n    return (\n        <>\n            {success ? (\n                <section>\n                    <h1>You are logged in!</h1>\n                    <br />\n                    <p>{/* <a href=\"#\">Go to Home</a> */}</p>\n                </section>\n            ) : (\n                <section className=\"logger d-flex justify-content-center align-items-center flex-column\">\n                    <p\n                        ref={errRef}\n                        className={errMsg ? \"errmsg\" : \"offscreen\"}\n                        aria-live=\"assertive\"\n                    >\n                        {errMsg}\n                    </p>\n                    <h1>Sign In</h1>\n                    <form onSubmit={handleSubmit}>\n                        <label htmlFor=\"username\">Username:</label>\n                        <input\n                            type=\"text\"\n                            id=\"username\"\n                            ref={userRef}\n                            autoComplete=\"off\"\n                            onChange={(e) => setUser(e.target.value)}\n                            value={user}\n                            required\n                        />\n                        <label htmlFor=\"password\">Password:</label>\n                        <input\n                            type=\"password\"\n                            id=\"password\"\n                            onChange={(e) => setPwd(e.target.value)}\n                            value={pwd}\n                            required\n                        />\n                        <button>Sign In</button>\n                    </form>\n                    <p>\n                        Need an Account?\n                        <br />\n                        <span className=\"line\">\n                            <a href=\"#\">Sign Up</a>\n                        </span>\n                    </p>\n                </section>\n            )}\n        </>\n    );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}